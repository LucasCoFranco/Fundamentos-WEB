<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buscar Dados</title>
</head>
<body>
    <h2>Buscar Dados</h2>

    <!-- Formulário de busca -->
    <form id="formBusca">
        <label for="filtro">Filtrar por Nome:</label>
        <input type="text" id="filtro" name="filtro">
        <button type="submit">Buscar</button>
    </form>

    <!-- Tabela para exibir os resultados -->
    <table id="tabelaResultados">
        <thead>
            <tr>
                <th>Id</th>
                <th>Nome</th>
                <th>Veículo</th>
                <th>Marca</th>
                <th>Ano</th>
                <th>Endereço</th>
                <th>E-mail</th>
                <th>Telefone</th>
            </tr>
        </thead>
        <tbody id="corpoTabela">
            <!-- Aqui serão inseridos os resultados da busca -->
        </tbody>
    </table>

    <!-- Script JavaScript para enviar a requisição -->
    <script>
        // Captura o evento de submit do formulário
        document.getElementById('formBusca').addEventListener('submit', function(event) {
            event.preventDefault(); // Previne o envio padrão do formulário

            var filtro = document.getElementById('filtro').value; // Obtém o valor do campo de filtro

            // Monta a URL da requisição GET
            var url = '/buscar?filtro=' + encodeURIComponent(filtro);

            // Faz a requisição GET para buscar os dados filtrados
            fetch(url)
                .then(response => response.json())
                .then(data => {
                    var tbody = document.getElementById('corpoTabela');
                    tbody.innerHTML = ''; // Limpa o conteúdo atual da tabela

                    // Itera sobre os dados recebidos e adiciona as linhas na tabela
                    data.forEach(dado => {
                        var row = `<tr>
                            <td>${dado.id}</td>
                            <td>${dado.nome}</td>
                            <td>${dado.veiculo}</td>
                            <td>${dado.marca}</td>
                            <td>${dado.ano}</td>
                            <td>${dado.endereco}</td>
                            <td>${dado.email}</td>
                            <td>${dado.telefone}</td>
                        </tr>`;
                        tbody.innerHTML += row;
                    });
                })
                .catch(error => console.error('Erro ao buscar dados:', error));
        });
    </script>
</body>
</html>
